# 初识Rime

![Rime官网header节点截图](./attachments/rime_homepage_header_screenshot.png)



## 1、Rime

打开 [官网](https://rime.im/) 或者 [Github项目主页](https://github.com/rime/librime) 我们就能看到它的命名含义：

>  **RIME: Rime Input Method Engine**

可以看出这个名称使用了[递归缩写](https://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92%E7%BC%A9%E5%86%99)命名），翻译过来是 *Rime输入法引擎* 。

我们较常使用首字母大写的“ *Rime* ”，而非全大写的“ *RIME* ”。

> 值得注意的是，RIME名称中的“IME”与我们通常所熟知的概念的“IME”不尽相同。我们通常所指的“IME”的全名应该是Input Method Editor[^IME]，输入法编辑器，也就是我们通常意义上所指的输入法（软件）。

Rime的作者：弓辰，号佛振，Github[@lotem](https://github.com/lotem)。感兴趣可以看看这个[访谈](https://www.ituring.com.cn/article/118072)[^Rime作者访谈]来了解他和Rime背后的事迹。

“中州韵”：一般来说，它指的就是Rime引擎，你差不多可以把它当作Rime引擎的中文译名，在一个句子中直接成分替换来理解。不过我们普遍更习惯叫“Rime”。

“小狼毫”、“鼠须管”：分别是Windows和macOS的Rime官方发行版。佛振为这两个Rime官方的发行版定下的特别的名称。



## 2、Rime引擎、Rime(输入法)发行版、Rime输入法前端

#### Rime引擎

Rime引擎，具体一点来说，指的是[librime](https://github.com/rime/librime)，Rime的 *核心* 部分[^La rime] 。

Rime引擎，即librime，本质上来说是一个供其他程序调用的库，命名有*lib*前缀是因为Linux的共享库命名约定，lib就是库(library)的缩写。

我们通常说的*Rime版本*指的就是librime的版本。Rime发行版的版本号与Rime引擎的版本号基本上没有互相依赖的关系。

从librime的 [Github项目主页](https://github.com/rime/librime) 我们可以看到，Rime主要是C++写的，这使得Rime具有良好的跨平台性，能作为一个库移植到多种系统平台。

#### Rime(输入法)发行版

**发行版**(distribution) 是一个在Linux相关领域里很常见的概念。比如说：Linux本身是一个内核(kernel) 而不是操作系统，“使用某Linux系统”，实际上是“使用了基于Linux内核的某系统发行版”。操作系统都会有内核，对应的，Windows操作系统有NT内核。

我们一般说的“Rime输入法”也类似，其实说的是“使用了Rime引擎的某某(运行在某系统平台的)输入法软件”。

打个便于理解的比方：

> 你开一辆车，通常来说你会关注车开起来感受怎么样。不同的车有不同性能的发动机（引擎），还会有不同的内饰和仪表盘和中控面板……这些每辆车都不同的地方，就是每个发行版各自的特点和不同，而一款车型就是一种发行版；**你总是驾驶一辆*整车*，而不是驾驶一个发动机/引擎**，光一个发动机并不能让车前进，发动机需要车的其他部分配合才能运转；不同的发动机对你的驾驶体验可能有很大的影响，百公里加速度、推背感、热效率省油特性等等的，因此你仍然可能会关注发动机，但是它只是车的一部分，就单纯的驾驶来说，也可以不那么关注和弄清楚一切。
>
> 进一步来说，曾经你可能只用过大厂的输入法（搜狗百度迅飞等），是个纯粹的驾驶员：只管把车开得稳稳的，顺利抵达目的地，注意交规，日常来说比起车更在乎驾驶道路规划躲避拥堵，而不在乎(或者不那么在乎)车怎么运行或者怎么组成的，毕竟你提车时本来就是一辆完整的车；现在不管出于什么原因，你来到了Rime输入法上，然后你得到的是：一大包乐高零件！以及一些散落的，可能不那么详尽的拼装步骤和注意事项的说明书 ——总之，你得先把这辆车从各种零件拼成一辆完整的车，然后才能开上路
>
> （幸运的是，已经有很多大佬为我们准备好了组装好的车，比如雾凇、薄荷——我们会在后面再讨论这些）
>
> 不同的Rime发行版的车，可能会有着不同的车壳（外观配色界面配置等），它们可能看起来会有些不同；但是实际的驾驶体验会是接近的，因为他们使用同样的引擎（Rime引擎）。

也许你会感到疑惑，为什么不能所有平台都用一套代码，同用一个名称？对于Rime，存在不同发行版有一个直接且重要的原因，解耦。

由于输入法软件的系统平台接口强相关性，不同系统平台可能会具有截然不同的软件开发方式、图形界面接口和系统调用接口。Rime分离出了这些依赖具体平台的实现，使得librime能专注实现平台无关的引擎逻辑并抽象出调用接口，从而使得librime一个代码库可以供给多个不同系统平台的Rime发行版来使用，也能使librime的代码库干净整洁。在这么做的同时，也导致为了适配系统平台而产生或牺牲了部分特性，因此遇到某些平台相关的问题时不能一概而论，需要对平台具体问题具体分析，此时不同发行版具有各自名称的作用就凸显出来了，讨论交流时能更好区分和定位问题。

#### Rime输入法前端

*Rime输入法前端* 和 *Rime输入法发行版* 相似却又细微不同。“发行版”更倾向于指代包含前端和Rime引擎的整体，而“前端”指代不包含Rime引擎。

从用户/使用者的角度来说，你使用的是Rime输入法的发行版；从开发者的角度来说，要在某个系统上实现一个Rime输入法，主要需要为Rime引擎实现一个(输入法)前端。

> 前端狭义上多指Web前端技术，Html+Js+Css那一套。但是广义上“前端”所指代的东西，可以是具有“前”这个抽象方位含义（更贴近使用者/人）的任何“端”，比如编译器的前端，以及我们这里指代的，输入法前端。

通常来说，实现前端大概需要处理这些内容：系统输入法接口、按键事件、外观界面、对接Rime引擎接口……

一种简单的前端是基于命令行输入输出的前端，将所有图形界面的文本内容在终端中打印，并接收来自终端的输入。一般用来测试Rime配方。























## 脚注

[^IME]: https://learn.microsoft.com/zh-cn/windows/apps/design/input/input-method-editors ：输入法编辑器 (IME) 是一个软件组件，它使用户能够以一种无法在标准 QWERTY 键盘上轻松表示的语言来输入文本。 使用该编辑器通常是考虑到用户的书面语言（如各种东亚语言）中的字符数。用户键入由 IME 解释的键组合，而不是每个单个键盘键上显示的单个字符。 IME 会生成与键击集匹配的字符或可供用户从中进行选择的候选字符列表。 然后，所选字符将插入用户与之交互的编辑控件中。
[^Rime作者访谈]: https://www.ituring.com.cn/article/118072 ：一位匠人的中州韵——专访Rime输入法作者佛振（图灵访谈）
[^La rime]: https://rime.im/code/ ：**La rime** - the core library - https://github.com/rime/librime





